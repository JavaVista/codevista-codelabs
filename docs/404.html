<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="initial-scale=1,minimum-scale=1,width=device-width">
<title>Redirecting...</title>
<style>
*{margin:0;padding:0}code,html{font:15px/22px arial,sans-serif}html{background:#fff;color:#222;padding:15px}p{margin:11px 0 22px;overflow:hidden}ins{color:#777;text-decoration:none}a img{border:0}#wrapper{margin:170px auto 0;padding:0 70px}#logo{background:url(/images/lockup_developers_color_color.svg) no-repeat;height:25px;width:100%}#logo,.loading{display:inline-block}.loading{-webkit-animation:spin 1s linear infinite;animation:spin 1s linear infinite;margin-left:10px}@-webkit-keyframes spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}
</style>
<script>
// Handle malformed URLs from codelab Close button on GitHub Pages
      (function() {
        const path = window.location.pathname;
        console.log('404 page loaded for path:', path);
        
        // Detect base URL from current location for GitHub Pages support
        // e.g., https://user.github.io/repo-name/ -> /repo-name/
        const baseUrl = window.location.pathname.split('/')[1] ? '/' + window.location.pathname.split('/')[1] + '/' : '/';
        console.log('Detected base URL:', baseUrl);
        
        // Update home links to use correct base URL
        const homeLinks = document.querySelectorAll('a[href="/"]');
        homeLinks.forEach(function(link) {
          link.href = baseUrl === '/' ? '/' : baseUrl.slice(0, -1); // Remove trailing slash for consistency
        });
        
        // Check if this is a malformed codelab URL (missing dot before html)
        // Pattern: /baseUrl/viewNamehtml → /baseUrl/viewName.html
        const malformedPattern = new RegExp('^' + baseUrl.replace(/\/$/, '') + '/([a-z0-9\\-]+)html$', 'i');
        const match = path.match(malformedPattern);
        
        if (match) {
          const viewName = match[1];
          const correctUrl = baseUrl.replace(/\/$/, '') + '/' + viewName + '.html';
          console.log('Detected malformed codelab URL. Redirecting:', path, '→', correctUrl);
          
          // Use replace to avoid adding to browser history
          window.location.replace(correctUrl);
          return;
        }
        
        // Also check for malformed URLs without base URL (fallback)
        const simpleMalformedPattern = /^\/([a-z0-9\-]+)html$/i;
        const simpleMatch = path.match(simpleMalformedPattern);
        
        if (simpleMatch) {
          const viewName = simpleMatch[1];
          const correctUrl = baseUrl.replace(/\/$/, '') + '/' + viewName + '.html';
          console.log('Detected simple malformed codelab URL. Redirecting:', path, '→', correctUrl);
          
          // Use replace to avoid adding to browser history
          window.location.replace(correctUrl);
          return;
        }
        
        // If no redirect pattern matches, show 404 after a brief moment
        setTimeout(function() {
          document.getElementById('redirect-message').style.display = 'none';
          document.getElementById('not-found-message').style.display = 'block';
        }, 2000);
      })();
</script>
</head>
<body>
<div id="wrapper">
<a href="/"><span id="logo" aria-label="Google Codelabs"></span></a>
<div id="redirect-message">
<p><b>Redirecting...</b> <span class="loading">⟳</span></p>
<p><ins>Please wait while we redirect you to the correct page.</ins></p>
</div>
<div id="not-found-message" style="display:none;">
<p><b>404.</b> <ins>That's an error.</ins></p>
<p>The requested URL was not found. <ins><a href="/">Return to home</a></ins></p>
</div>
</div>
</body>
</html>
